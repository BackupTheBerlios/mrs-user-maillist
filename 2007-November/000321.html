<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Mrs-user] MRS: Web Service
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/mrs-user/2007-November/index.html" >
   <LINK REL="made" HREF="mailto:mrs-user%40lists.berlios.de?Subject=Re%3A%20%5BMrs-user%5D%20MRS%3A%20Web%20Service&In-Reply-To=%3C474702F0.6020709%40lcb.uu.se%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000317.html">
   <LINK REL="Next"  HREF="000322.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Mrs-user] MRS: Web Service</H1>
    <B>Alvaro Martinez Barrio</B> 
    <A HREF="mailto:mrs-user%40lists.berlios.de?Subject=Re%3A%20%5BMrs-user%5D%20MRS%3A%20Web%20Service&In-Reply-To=%3C474702F0.6020709%40lcb.uu.se%3E"
       TITLE="[Mrs-user] MRS: Web Service">Alvaro.Martinez.Barrio at lcb.uu.se
       </A><BR>
    <I>Fri Nov 23 17:42:24 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000317.html">[Mrs-user] MRS: Web Service
</A></li>
        <LI>Next message: <A HREF="000322.html">[Mrs-user] MRS: Web Service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#321">[ date ]</a>
              <a href="thread.html#321">[ thread ]</a>
              <a href="subject.html#321">[ subject ]</a>
              <a href="author.html#321">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Maarten and everybody!

The blast WS wasn't working when I created the threads element under 
&lt;blast-ws&gt; but that was the wrong place!!!

And I looked into the mrs-config.xml.TEMPLATE in Berlios and it was like 
this:

	&lt;!-- service specific settings --&gt;
	&lt;search-ws&gt;
		&lt;address&gt;0.0.0.0&lt;/address&gt;
		&lt;port&gt;8081&lt;/port&gt;
		&lt;logfile&gt;/var/log/mrsws-search.log&lt;/logfile&gt;
		&lt;threads&gt;2&lt;/threads&gt;
	&lt;/search-ws&gt;

Now it works properly. Neat!

Just the Clustal client (to my WS) I don't get to work. It is just I 
need the work around to the parameter passing thing. Still the same failure.

MVH,
&#225;lvaro


Alvaro Martinez Barrio wrote:
&gt;<i> Thanks Maarten! Don't worry. You are excelent replying post asking for help.
</I>&gt;<i> 
</I>&gt;<i> I don't have the threads parameter in my mrs-config.xml :( Could it be 
</I>&gt;<i> that???
</I>&gt;<i> 
</I>&gt;<i> How should I write it?
</I>&gt;<i>   &lt;threads&gt;2&lt;/threads&gt;
</I>&gt;<i> 
</I>&gt;<i> Like that?
</I>&gt;<i> 
</I>&gt;<i> These are the lines I get from the '/var/log/mrsws-blast.log' file, not 
</I>&gt;<i> much...
</I>&gt;<i> 
</I>&gt;<i> IP [22/Nov/2007:22:22:39] ns__BlastAsync sprot LCLYTHIGRNIYYGSYL...  0.000
</I>&gt;<i> IP [22/Nov/2007:22:22:40] ns__BlastJobStatus 
</I>&gt;<i> 90c1a4ac-978c-11dc-b9ed-1b8bb5da29e5 0.000
</I>&gt;<i> IP [22/Nov/2007:22:22:41] ns__BlastJobStatus 
</I>&gt;<i> 90c1a4ac-978c-11dc-b9ed-1b8bb5da29e5 0.000
</I>&gt;<i> .....
</I>&gt;<i> 
</I>&gt;<i> If I start the blast WS with the flag -v (I haven't got the -f so I just 
</I>&gt;<i> skipped it and it goes into foreground as opposite to using -b -perhaps 
</I>&gt;<i> a very old version?-):
</I>&gt;<i> 
</I>&gt;<i> Loading pdb from /usr/local/mrs/data//mrs/pdb.cmp ... failed
</I>&gt;<i> Loading sprot from /usr/local/mrs/data//mrs/sprot.cmp ...Using file 
</I>&gt;<i> <A HREF="file:///usr/local/mrs/data/mrs/sprot.cmp">file:///usr/local/mrs/data/mrs/sprot.cmp</A>
</I>&gt;<i>   done
</I>&gt;<i> Loading trembl from /usr/local/mrs/data//mrs/trembl.cmp ...Using file 
</I>&gt;<i> <A HREF="file:///usr/local/mrs/data/mrs/trembl.cmp">file:///usr/local/mrs/data/mrs/trembl.cmp</A>
</I>&gt;<i>   done
</I>&gt;<i> 
</I>&gt;<i> IP [22/Nov/2007:22:31:00] ns__BlastAsync sprot LCLYTHIGRNIYYGSYL...  0.001
</I>&gt;<i> IP [22/Nov/2007:22:31:01] ns__BlastJobStatus 
</I>&gt;<i> 38881eda-9942-11dc-bff8-9718883c6a85 0.000
</I>&gt;<i> 
</I>&gt;<i> params
</I>&gt;<i> db:                    sprot
</I>&gt;<i> query: 
</I>&gt;<i> LCLYTHIGRNIYYGSYLYSETWNTGIMLLLITMATAFMGYVLPWGQMSFWGATVITN...
</I>&gt;<i> program:               blastp
</I>&gt;<i> matrix:                BLOSUM62
</I>&gt;<i> word_size:             3
</I>&gt;<i> expect:                10.000
</I>&gt;<i> low_complexity_filter: 1
</I>&gt;<i> gapped:                1
</I>&gt;<i> gap_open:              11
</I>&gt;<i> gap_extend:            1
</I>&gt;<i> 
</I>&gt;<i> IP [22/Nov/2007:22:31:02] ns__BlastJobStatus 
</I>&gt;<i> 38881eda-9942-11dc-bff8-9718883c6a85 0.000
</I>&gt;<i> Using memory mapped blast index
</I>&gt;<i> ...........IP [22/Nov/2007:22:31:03] ns__BlastJobStatus 
</I>&gt;<i> 38881eda-9942-11dc-bff8-9718883c6a85 0.000
</I>&gt;<i> 130.238.37.103 [22/Nov/2007:22:31:04] ns__BlastJobStatus 
</I>&gt;<i> 38881eda-9942-11dc-bff8-9718883c6a85 0.000
</I>&gt;<i> ................IP [22/Nov/2007:22:31:05] ns__BlastJobStatus 
</I>&gt;<i> 38881eda-9942-11dc-bff8-9718883c6a85 0.000
</I>&gt;<i> ....................IP [22/Nov/2007:22:31:06] ns__BlastJobStatus 
</I>&gt;<i> 38881eda-9942-11dc-bff8-9718883c6a85 0.000
</I>&gt;<i> .....................IP [22/Nov/2007:22:31:07] ns__BlastJobStatus 
</I>&gt;<i> 38881eda-9942-11dc-bff8-9718883c6a85 0.000
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> And it stalls there. I think it might be the thread thing so as threads 
</I>&gt;<i> are not created, blast jobs don't get delivered.... Is that right? How 
</I>&gt;<i> do I configure then the .xml file?
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> MVH,
</I>&gt;<i> &#225;lvaro
</I>&gt;<i> 
</I>&gt;<i> Maarten L. Hekkelman wrote:
</I>&gt;&gt;<i> Op 21-nov-2007, om 16:32 heeft Alvaro Martinez Barrio het volgende 
</I>&gt;&gt;<i> geschreven:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Sorry for not responding sooner to your previous e-mail. I'm very busy 
</I>&gt;&gt;<i> with other things at the moment.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I have developed better this script for querying MRS blast service and
</I>&gt;&gt;&gt;<i> now works better. But just against your MRS in Netherlands, Maarten.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If I query my server (see first trace) it stalls on the queue. The
</I>&gt;&gt;&gt;<i> second trace correspond to querying yours. You see how it goes to the
</I>&gt;&gt;&gt;<i> different status.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> What do I have to look for? As you said you implemented your own blast.
</I>&gt;&gt;&gt;<i> Some kind of queuing system should be present perhaps???
</I>&gt;&gt;<i> If you get back a message at all from the blast server that means the 
</I>&gt;&gt;<i> server is running. And yes I did implement my own blast algorithm as 
</I>&gt;&gt;<i> well as the queueing mechanism and all.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> You could start the blast server but without forking it so it stays in 
</I>&gt;&gt;<i> the foreground. You can do so by starting it with the -f flags from 
</I>&gt;&gt;<i> within a terminal. And then you can specify the -v flag to get more 
</I>&gt;&gt;<i> verbose output. These two should give you some more feedback about what 
</I>&gt;&gt;<i> is going on.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There are some extra options that might influence the way blast works. 
</I>&gt;&gt;<i> E.g. there's a threads parameter in the mrs-config.xml file, you might 
</I>&gt;&gt;<i> want to change that to two e.g.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> mvg,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Maarten L. Hekkelman
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/mrs-user">maarten at hekkelman.com</A>
</I>&gt;&gt;<i> 06 26 750 799
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i> 
</I>&gt;<i> 
</I>

-- 
Alvaro Martinez Barrio
The Linnaeus Centre for Bioinformatics
Husargatan 3, Box 598
SE 751 24 Uppsala SWEDEN

Tel: +46 18 471 6685 - Fax: +46 18 471 6698

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000317.html">[Mrs-user] MRS: Web Service
</A></li>
	<LI>Next message: <A HREF="000322.html">[Mrs-user] MRS: Web Service
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#321">[ date ]</a>
              <a href="thread.html#321">[ thread ]</a>
              <a href="subject.html#321">[ subject ]</a>
              <a href="author.html#321">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/mrs-user">More information about the Mrs-user
mailing list</a><br>
</body></html>
